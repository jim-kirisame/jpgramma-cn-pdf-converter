%\usepackage[cm]{fullpage}
%\usepackage[english]{babel}
\usepackage[table]{xcolor}
\usepackage{multirow}
%\usepackage{omega-japanese}
%\InputTranslation currentfile \OCPutf
\usepackage{fancyhdr}
\usepackage{fontspec}
\usepackage{ulem} % for sout
\usepackage{ctex}
\usepackage{CJKfntef}
%\usepackage{xeCJK} 
\usepackage[bookmarks=true,pdfusetitle]{hyperref}
\usepackage{tikz}
\usepackage{tabu}
\usepackage{adjustbox}
\usepackage{enumitem}

\setmainfont{Linux Biolinum O}
\setCJKmainfont[AutoFakeSlant]{Noto Serif CJK SC}
\setCJKsansfont{Noto Sans CJK SC}

\hbadness=10000
\raggedbottom
\parindent0pt
%\parskip2.3ex
\setlength{\headheight}{15.2pt}

\setlist[enumerate]{itemsep=0pt, parsep=0pt}
\setlist[itemize]{itemsep=0pt, parsep=0pt}

\definecolor{boxbg}{gray}{0.95}
\definecolor{boxframe}{gray}{0.4}
\definecolor{highlight}{gray}{0.3}
\definecolor{tablecaption}{gray}{1}
\definecolor{tableheader}{gray}{1}

\tikzstyle{tkbox} = [draw=boxframe, fill=boxbg, rectangle, thick, inner sep=10pt]
\tikzstyle{fancytitle} = [fill=boxframe, text=white, above right=0pt, inner xsep=5pt]

\newcommand{\tkbegin}{%
	\pagestyle{empty}%
	\pagenumbering{Roman}%
	\begin{center}%
		\leavevmode%
		\normalfont%
		\vskip 11cm%
		{\Huge \textbf{\@title}\par}%
		{\large \@author\par}%
		\vskip 8cm%
		
		\includegraphics[height=1cm,natwidth=403,natheight=141]{by-nc-sa.png}\\%
		{\normalsize \@date\par}%
	\end{center}%
	
	\cleardoublepage%
	\pagestyle{plain}%
	\pagenumbering{roman}%
	\tableofcontents%
	\clearpage%
	\pagestyle{fancy}%
	\parskip2ex%
	\pagenumbering{arabic}%
	\setcounter{page}{1}%
}
\newenvironment{tkbasebox}%
{\begin{tikzpicture}}%
{\end{tikzpicture}}
\newenvironment{tkinsidebox}%
{\begin{minipage}{\dimexpr\textwidth-21pt}}%
{\end{minipage}}

\newcommand{\tkboxheader}[1]{\node[fancytitle] at (box.north west) {\textbf{#1}};}
\newcommand{\jpb}{\hskip 0sp plus 2pt minus 2sp}
\newcommand{\tabincell}[3][t]{\begin{tabular}[#1]{@{}#2@{}}#3\end{tabular}}
\newcommand{\linktarget}[1]{#1}

\newcommand{\tablecaption}[1]{\textit{#1}}
\newcommand{\tableheader}[1]{\textbf{#1}}

\newcommand{\dialogbox}[2]{
	\begin{center}\begin{tkbasebox}%
		\node[tkbox](box){%
			\begin{tkinsidebox}%
			\setlist[enumerate]{leftmargin=*, itemsep=0pt, parsep=0pt}%
			\setlist[itemize]{leftmargin=*, itemsep=0pt, parsep=0pt}%
			#2%
			\end{tkinsidebox}%
		};%
		\tkboxheader{#1}%
	\end{tkbasebox}\end{center}%
}

\let\emph\relax
\newcommand{\emph}[1]{\CJKunderdot{\em#1}}